/**
 * Arbitrage Types - Cross-venue and cross-chain arbitrage opportunities
 */

import { BigNumber } from 'bignumber.js';

export enum ArbitrageType {
  SPOT = 'spot',
  TRIANGULAR = 'triangular',
  STATISTICAL = 'statistical',
  DEX_CEX = 'dex_cex',
  CROSS_CHAIN = 'cross_chain'
}

export enum ArbitrageRisk {
  LOW = 'low',
  MEDIUM = 'medium',
  HIGH = 'high',
  EXTREME = 'extreme'
}

export interface ArbitrageOpportunity {
  id: string;
  type: ArbitrageType;
  venues: string[];
  symbols: string[];
  expectedProfit: BigNumber;
  requiredCapital: BigNumber;
  confidence: number;
  timeWindow: number; // milliseconds
  risk: ArbitrageRisk;
  metadata: Record<string, any>;
}

export interface TriangularArbitrage {
  path: string[]; // e.g., ['BTC/USDT', 'ETH/BTC', 'ETH/USDT']
  startCurrency: string;
  endCurrency: string;
  expectedReturn: number; // percentage
  executionTime: number; // milliseconds
}

export interface StatisticalArbitrage {
  pair1: string;
  pair2: string;
  correlation: number;
  cointegration: number;
  zScore: number;
  halfLife: number; // mean reversion time
  hedgeRatio: number;
}

export interface FlashLoanArbitrage {
  loanAmount: BigNumber;
  loanAsset: string;
  profitAfterFees: BigNumber;
  gasEstimate: BigNumber;
  flashLoanProvider: string;
}

export interface TradingPair {
  base: string;
  quote: string;
  symbol: string;
  venue: string;
}

export interface ArbitrageRiskDetail {
  type: 'execution' | 'price' | 'inventory' | 'regulatory' | 'technical';
  severity: 'low' | 'medium' | 'high';
  probability: number; // 0-1
  mitigation?: string;
}

export interface CrossChainArbitrage {
  sourceChain: string;
  targetChain: string;
  asset: string;
  sourcePrice: number;
  targetPrice: number;
  bridgeCost: BigNumber;
  bridgeTime: number; // milliseconds
  profitAfterCosts: BigNumber;
  risks: {
    bridgeFailure: number; // probability
    priceMovement: number; // expected volatility
    congestion: number; // probability of delays
  };
}

export interface FlashLoanStep {
  action: 'borrow' | 'swap' | 'deposit' | 'withdraw' | 'repay';
  protocol: string;
  asset: string;
  amount: BigNumber;
  expectedOutput?: BigNumber;
  gasEstimate: BigNumber;
} 